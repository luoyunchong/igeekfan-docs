import{_ as t}from"./plugin-vue_export-helper.21dcd24c.js";import{o as p,c as o,a as n,b as e,F as c,e as s,d as l,r as i}from"./app.4748b5e2.js";const u={},r={href:"https://www.talkingdotnet.com/clean-way-to-add-startup-class-in-asp-net-core-6-project/",target:"_blank",rel:"noopener noreferrer"},d=s("https://www.talkingdotnet.com/clean-way-to-add-startup-class-in-asp-net-core-6-project/"),k=n("li",null,"\u4F5C\u8005: Talking Dotnet",-1),b=s("\u5982\u679C\u60A8\u5173\u6CE8"),_=n("code",null,"ASP.NET Core 6",-1),m=s("\uFF0C\u90A3\u4E48\u60A8\u53EF\u80FD\u53D1\u73B0\uFF0C\u5BF9\u4E8E"),h=n("code",null,"ASP.NET Core 6",-1),g=s("\u9879\u76EE\uFF0C\u6CA1\u6709"),f=n("code",null,"Startup.cs",-1),w=s("\u6587\u4EF6\u3002\u6211\u53D1\u5E03\u4E86\u5173\u4E8E"),S={href:"https://igeekfan.cn/dotnetcore/examples/NET6Startup.html",target:"_blank",rel:"noopener noreferrer"},v=s("\u5982\u4F55\u5728ASP.NETCore 6\u9879\u76EE\u4E2D\u6DFB\u52A0Startup.cs"),A=s("\uFF0C\u8FD9\u79CD\u65B9\u6CD5\u4EE5\u4F20\u7EDF\u7684\u65B9\u5F0F\u5C06\u7C7B\u5F15\u5165\u5230\u9879\u76EE\u4E2D\uFF0C\u8FD9\u662F\u6211\u4EEC\u4ECA\u5929\u4F7F\u7528\u7684"),y=n("code",null,"ASP.NET Core 5",-1),x=s("\u53CA\u5176\u65E9\u671F\u7248\u672C\u3002\u4F46\u662F\uFF0C\u5982\u679C\u6211\u4EEC\u80FD\u591F\u6539\u8FDB\uFF0C\u8BA9\u5B83\u53D8\u5F97\u66F4\u597D\u5462\u3002\u597D\u7684\uFF0C\u5728\u8FD9\u7BC7\u6587\u7AE0\u4E2D\uFF0C\u8BA9\u6211\u4EEC\u770B\u4E00\u770B\u5728"),E=n("code",null,"ASP.NET Core6",-1),C=s("\u4E2D\u6DFB\u52A0"),N=n("code",null,"Startup",-1),T=s("\u7C7B\u7684\u6574\u6D01\u65B9\u6CD5"),P=s("\u4E3A\u4E86\u4EE5\u6574\u6D01\u7684\u65B9\u5F0F\u5B9E\u73B0\uFF0C\u6211\u4EEC\u5C06\u5229\u7528"),B={href:"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods",target:"_blank",rel:"noopener noreferrer"},W=s("\u6269\u5C55\u65B9\u6CD5"),R=s("\u3002\u6269\u5C55\u65B9\u6CD5\u5141\u8BB8\u60A8\u5411\u73B0\u6709\u7C7B\u578B\u201C\u6DFB\u52A0\u201D\u65B9\u6CD5\uFF0C\u800C\u65E0\u9700\u521B\u5EFA\u65B0\u7684\u6D3E\u751F\u7C7B\u578B\u3001\u91CD\u65B0\u7F16\u8BD1\u6216\u4EE5\u5176\u4ED6\u65B9\u5F0F\u4FEE\u6539\u539F\u59CB\u7C7B\u578B\u3002"),M=n("code",null,"ASP.NET Core 6.0",-1),I=s("\u4F7F\u7528\u548C\u6765\u5F15\u5BFC"),U=n("code",null,"ASP.NET Core\u5E94\u7528\u7A0B\u5E8F",-1),V=s("\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u5C06\u4E3A\u8FD9\u4E8C\u4E2A("),H=n("code",null,"WebApplicationBuilder",-1),L=s("\u3001"),j=n("code",null,"WebApplication",-1),q=s(")\u7C7B\u521B\u5EFA\u6269\u5C55\u65B9\u6CD5"),D=s("\u8BB0\u4F4F\uFF0C\u8FD92\u4E2A\u662F"),F=n("code",null,"ASP.NET Core 6.0",-1),G=s("\u65B0\u5F15\u5165\u7684\u3002\u9605\u8BFB"),O={href:"https://andrewlock.net/exploring-dotnet-6-part-2-comparing-webapplicationbuilder-to-the-generic-host/",target:"_blank",rel:"noopener noreferrer"},z=s("Comparing WebApplicationBuilder to the Generic Host"),J=s("\uFF0C\u5E76"),K={href:"https://andrewlock.net/exploring-dotnet-6-part-3-exploring-the-code-behind-webapplicationbuilder/",target:"_blank",rel:"noopener noreferrer"},Q=s("Exploring the code behind WebApplicationBuilder"),X=s("\u4EE5\u4E86\u89E3\u6709\u5173\u6B64\u65B0\u5F15\u5BFC\u6A21\u578B\u7684\u66F4\u591A\u4FE1\u606F\u3002"),Y=l(`<p>\u8BE5\u7C7B\u7528\u4E8E\u6CE8\u518C/\u914D\u7F6E\u670D\u52A1\u6216\u4F9D\u8D56\u9879\u3002\u7531\u4E8E\u6269\u5C55\u65B9\u6CD5\u662F\u9759\u6001\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8BF7\u4F7F\u7528\u540D\u4E3A\u7684\u9759\u6001\u65B9\u6CD5\u521B\u5EFA\u4E00\u4E2A\u9759\u6001\u7C7B\u3002\u73B0\u5728\uFF0C\u5C06\u4F9D\u8D56\u9879\u6CE8\u518C\u4EE3\u7801\u4ECE\u79FB\u52A8\u5230\u8FD9\u91CC\u3002\u5982\u4E0B</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">RegisterStartupServices</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">WebApplicationBuilder</span> <span class="token function">RegisterServices</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">WebApplicationBuilder</span> builder<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddControllers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle</span>
        builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddEndpointsApiExplorer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u73B0\u5728\uFF0C\u8BA9\u6211\u4EEC\u521B\u5EFA\u53E6\u4E00\u4E2A\u9759\u6001\u7C7B<code>RegisterStartupMiddlewares</code>\uFF0C\u5B83\u6269\u5C55\u4E86\u7528\u4E8E\u4E2D\u95F4\u4EF6\u6CE8\u518C\u7684\u7C7B<code>WebApplication</code>\u3002\u5728\u8FD9\u4E2A\u7C7B\u4E2D\uFF0C\u4ECE\u4E2D\u79FB\u52A8\u4E2D\u95F4\u4EF6\u6CE8\u518C\u7801\u5E76\u5C06\u5176\u5F15\u5165\u65B9\u6CD5\u3002Program.cs\u4E2D\u7684<code>SetupMiddleware</code></p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">RegisterStartupMiddlewares</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">WebApplication</span> <span class="token function">SetupMiddleware</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">WebApplication</span> app<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Configure the HTTP request pipeline.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            app<span class="token punctuation">.</span><span class="token function">UseSwagger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            app<span class="token punctuation">.</span><span class="token function">UseSwaggerUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        app<span class="token punctuation">.</span><span class="token function">UseHttpsRedirection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        app<span class="token punctuation">.</span><span class="token function">UseAuthorization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        app<span class="token punctuation">.</span><span class="token function">MapControllers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> app<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>\u5B8C\u6210\u540E\uFF0C\u8BA9\u6211\u4EEC\u8FD4\u56DE\u5230<code>Program.cs</code>\u4E2D\u66F4\u65B0\u4EE3\u7801\u5E76\u4F7F\u7528\u8FD9\u4E9B\u6269\u5C55\u65B9\u6CD5\u3002\u5982\u4E0B</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">RegisterServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">SetupMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u6216\u8005\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8BA9\u4ED6\u66F4\u52A0\u6574\u6D01\uFF0C\u5E76\u5C06\u5176\u6392\u6210\u4E00\u884C\uFF0C\u5982\u4E0B</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code>WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">RegisterServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">SetupMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u73B0\u5728\uFF0C\u8FD9\u770B\u8D77\u6765\u66F4\u52A0\u6E05\u6670\u3001\u53EF\u8BFB\u548C\u6613\u4E8E\u7BA1\u7406\u3002\u5C31\u662F\u8FD9\u4E48\u7B80\u5355\u3002</p><h2 id="\u6E90\u7801" tabindex="-1"><a class="header-anchor" href="#\u6E90\u7801" aria-hidden="true">#</a> \u6E90\u7801</h2>`,10),Z={href:"https://github.com/luoyunchong/dotnetcore-examples/blob/master/999-Others/NET6/NET6Extensions/Program.cs",target:"_blank",rel:"noopener noreferrer"},$=s("dotnetcore-examples/Program.cs at master \xB7 luoyunchong/dotnetcore-examples (github.com)");function nn(sn,an){const a=i("ExternalLinkIcon");return p(),o(c,null,[n("blockquote",null,[n("ul",null,[n("li",null,[n("a",r,[d,e(a)])]),k])]),n("p",null,[b,_,m,h,g,f,w,n("a",S,[v,e(a)]),A,y,x,E,C,N,T]),n("p",null,[P,n("a",B,[W,e(a)]),R,M,I,U,V,H,L,j,q]),n("p",null,[D,F,G,n("a",O,[z,e(a)]),J,n("a",K,[Q,e(a)]),X]),Y,n("ul",null,[n("li",null,[n("a",Z,[$,e(a)])])])],64)}var pn=t(u,[["render",nn],["__file","ASPNETCore6-Add-Startup-Clean.html.vue"]]);export{pn as default};
