(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{700:function(s,a,n){"use strict";n.r(a);var e=n(10),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"认证鉴权状态"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#认证鉴权状态"}},[s._v("#")]),s._v(" 认证鉴权状态")]),s._v(" "),n("p",[s._v("认证分为以下情况：当前角色为管理员，该分组配置了权限，该分组未分配某一方法的权限.")]),s._v(" "),n("p",[s._v("状态码（StatusCode):401 UnAuthorized")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("StatusCode")]),s._v(" "),n("th",[s._v("含义")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("401 UnAuthorized")]),s._v(" "),n("td",[s._v("未授权、无权限、未登录")])]),s._v(" "),n("tr",[n("td",[s._v("422  UNPROCESSABLE ENTITY")]),s._v(" "),n("td",[s._v("令牌失效")])]),s._v(" "),n("tr",[n("td",[s._v("200")]),s._v(" "),n("td",[s._v("访问正常")])])])]),s._v(" "),n("ol",[n("li",[s._v("未登录，不带access_token，直接请求需要登录的接口、管理员接口结果一样。")])]),s._v(" "),n("p",[s._v("返回结果应为：状态码：401 UNAUTHORIZED")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n    "error_code": 10000,\n    "msg": "认证失败，请检查请求头或者重新登陆",\n    "request": "GET  /cms/admin/authority"\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("携带access_token，但非超级管理员(admin字段为2),访问的方法为角色为超管才有权限的方法。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[LinCmsAuthorize(Roles = LinGroup.Administrator)]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("返回结果应为：：状态码：401 UNAUTHORIZED")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n    "error_code": 10000,\n    "msg": "只有超级管理员可操作",\n    "request": "GET  /cms/admin/authority"\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("携带access_token ，访问只需要登录的接口（/cms/user/auths）")])]),s._v(" "),n("p",[s._v("控制器或方法上指定 "),n("strong",[s._v("[Authorize]")]),s._v(" 或 "),n("strong",[s._v("[LinCmsAuthorize]")]),s._v(" 特性标签时，必须登录才能访问，否则返回第一种结果。")]),s._v(" "),n("p",[s._v("返回结果应为：状态码：200")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n    "active": 1,\n    "admin": 1,\n    "auths": [\n        {\n            "信息": [\n                {\n                    "auth": "查看lin的信息",\n                    "module": "信息"\n                }\n            ]\n        }\n    ],\n    "avatar": null,\n    "create_time": 1564372600000,\n    "email": "acs@acs.com",\n    "group_id": 54,\n    "id": 112,\n    "nickname": "alan",\n    "update_time": 1564487059000\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("携带access_token，但此用户无访问此方法的权限（即该用户的组别未配置此权限）。")])]),s._v(" "),n("p",[s._v("返回结果应为：状态码：401 UNAUTHORIZED")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n    "error_code": 10000,\n    "msg": "权限不够，请联系超级管理员获得权限",\n    "request": "GET  /cms/log/search"\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("携带过期的access_token值\n返回结果应为：状态码：401 UNAUTHORIZED")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n    "error_code": 10050,\n    "msg": "令牌过期",\n    "request": "GET  /cms/admin/users"\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ol",{attrs:{start:"6"}},[n("li",[s._v("携带不正常的access_token值，后台无法下正常解析出用户信息\n返回结果应为：状态码：422 UNPROCESSABLE ENTITY")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n    "error_code": 10040,\n    "msg": "令牌失效",\n    "request": "GET  /cms/admin/users"\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);