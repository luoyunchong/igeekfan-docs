(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{593:function(t,s,e){"use strict";e.r(s);var a=e(10),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"net-编码的基础知识"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#net-编码的基础知识"}},[t._v("#")]),t._v(" .NET 编码的基础知识")]),t._v(" "),e("p",[t._v(".NET 编码的一些基本概念和分析")]),t._v(" "),e("h3",{attrs:{id:"简单的类型概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简单的类型概念"}},[t._v("#")]),t._v(" 简单的类型概念")]),t._v(" "),e("ul",[e("li",[t._v("Hex （16进制）")]),t._v(" "),e("li",[t._v("byte 字节 范围是："),e("code",[t._v("0~255")]),t._v("，二进制下的范围就是"),e("code",[t._v("00000000~11111111")]),t._v("，相当于1字节。")]),t._v(" "),e("li",[t._v("byte[] 字节数组")]),t._v(" "),e("li",[t._v("bit 比特，只有2种状态：0，1")])]),t._v(" "),e("p",[e("strong",[t._v("1 字节 等于 8 比特")]),t._v(" 即"),e("strong",[t._v("1byte=8bit")])]),t._v(" "),e("p",[t._v("在c#中。Byte即byte，他是一个struct结构体，")]),t._v(" "),e("p",[t._v("b1等于b2.")]),t._v(" "),e("div",{staticClass:"language-cs line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-cs"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")])]),t._v(" b "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")])]),t._v(" b1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xf")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//以0x开头 即16进制的写法")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")])]),t._v(" b2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nAssert"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Equal")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("错误的语法")]),t._v(" "),e("div",{staticClass:"language-cs line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-cs"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")])]),t._v(" b3 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" b1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("正确的语法")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("byte b3 = (byte)(b1 + b2);\n//或\nint b4 = b1 + b2;\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("因为byte的相互运算太容易发生溢出，+ 加的重载 是int类型相加，所以结果是int类型")]),t._v(" "),e("h3",{attrs:{id:"encoding-utf8-getbytes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#encoding-utf8-getbytes"}},[t._v("#")]),t._v(" Encoding.UTF8.GetBytes")]),t._v(" "),e("p",[t._v("UTF8是统一的编码方式，它是一种变长的编码方式.它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('byte[] plaintext = Encoding.UTF8.GetBytes("0123456789");\n')])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("能得到什么样的数据，"),e("strong",[t._v("48,49,50,51,52,53,54,55,56,57")]),t._v("。为什么？")]),t._v(" "),e("p",[t._v("搜ASCII码，我们就知道 "),e("code",[t._v("0")]),t._v("的ASCII码是 "),e("code",[t._v("48")])]),t._v(" "),e("p",[t._v("如果是字母呢。")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('byte[] plaintext = Encoding.UTF8.GetBytes("ABCDabcd");\n')])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("能得到什么样的数据，"),e("strong",[t._v("65,66,67,68,97,98,99,100")]),t._v("。为什么？还是因为ASCII码。UTF8当然是兼容ASCII码。")]),t._v(" "),e("p",[t._v("因为一个ASCII码，1个字节就能表示256个状态，所以英文字母，阿拉伯数字，标点符号都不在话，哪如果是中文呢。这里我们就拿UTF8编码来分析。")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('byte[]   plaintext = Encoding.UTF8.GetBytes("中国");\n')])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("如下内容，长度为6，228，184，173 都是十进制。如果转成16进制呢。"),e("strong",[t._v("e4，b8，ad")]),t._v("，如果分不清十六进制，建议学一下，计算机系统基础。当然，说明一下，"),e("code",[t._v("a")]),t._v("代表"),e("code",[t._v("10")]),t._v("，"),e("code",[t._v("e")]),t._v("即代表"),e("code",[t._v("14")]),t._v(".即"),e("code",[t._v("14*16+4=228")]),t._v(".表示时不区分大小写，即用大写"),e("code",[t._v("A")]),t._v("，和小写"),e("code",[t._v("a")]),t._v("都能表示"),e("code",[t._v("10")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("列")]),t._v(" "),e("th",[t._v("十进制")]),t._v(" "),e("th",[t._v("十六进制")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("0")]),t._v(" "),e("td",[t._v("228")]),t._v(" "),e("td",[t._v("e4")])]),t._v(" "),e("tr",[e("td",[t._v("1")]),t._v(" "),e("td",[t._v("184")]),t._v(" "),e("td",[t._v("b8")])]),t._v(" "),e("tr",[e("td",[t._v("2")]),t._v(" "),e("td",[t._v("173")]),t._v(" "),e("td",[t._v("ad")])]),t._v(" "),e("tr",[e("td",[t._v("3")]),t._v(" "),e("td",[t._v("229")]),t._v(" "),e("td",[t._v("e5")])]),t._v(" "),e("tr",[e("td",[t._v("4")]),t._v(" "),e("td",[t._v("155")]),t._v(" "),e("td",[t._v("9b")])]),t._v(" "),e("tr",[e("td",[t._v("5")]),t._v(" "),e("td",[t._v("189")]),t._v(" "),e("td",[t._v("bd")])])])]),t._v(" "),e("p",[t._v("我们从网上搜下，可以发现 中国 的UTF-8编码： "),e("strong",[t._v("E4B8AD E59BBD")]),t._v(".说明通过"),e("code",[t._v("Encoding.UTF8.GetBytes")]),t._v("的结果肯定是对的。中文是用3或4个 Bytes存储的。")]),t._v(" "),e("h3",{attrs:{id:"_1-byte-转换hex-16进制字符串"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-byte-转换hex-16进制字符串"}},[t._v("#")]),t._v(" 1.byte[] 转换hex(16进制字符串)")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("Encoding.UTF8.GetBytes")]),t._v("能得到数据的十进制的字节数组。")]),t._v(" "),e("li",[e("code",[t._v("BitConverter.ToString")]),t._v("支持将十进制的数据转换成16进制，中间以"),e("code",[t._v("-")]),t._v("分隔，所以需要将中间的"),e("code",[t._v("-")]),t._v(" "),e("code",[t._v("Replace")]),t._v("掉")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('public string ByteToHex(string str)\n{\n    byte[] bytes = Encoding.UTF8.GetBytes(str);\n    string hex = BitConverter.ToString(bytes, 0).Replace("-", string.Empty);\n    return hex;\n}\n')])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("p",[e("code",[t._v("hex")]),t._v("得到 的数据就是 "),e("code",[t._v("E4B8ADE59BBD")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(' string hex= ByteToHex("中国");\n')])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-byte-转换hex-stringbuilder方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-byte-转换hex-stringbuilder方式"}},[t._v("#")]),t._v(" 2.byte[] 转换hex:StringBuilder方式")]),t._v(" "),e("p",[t._v("如下内容为什么能将数据转成16进制.")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("Encoding.UTF8.GetBytes")]),t._v("能得到数据的十进制的字节数组。")]),t._v(" "),e("li",[t._v("利用c#中的 "),e("strong",[e("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/dotnet/standard/base-types/composite-formatting",target:"_blank",rel:"noopener noreferrer"}},[t._v("复合格式化特性"),e("OutboundLink")],1)]),t._v(" {0:X2}自动转换成16进制。同样内容支持Console.WriteLine等")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('public string ByteToHex2(string str)\n{\n    byte[] bytes = Encoding.UTF8.GetBytes(str);\n    StringBuilder ret = new StringBuilder();\n    foreach (byte b in bytes)\n    {\n        //{0:x2} 小写\n        ret.AppendFormat("{0:X2}", b);\n    }\n    return ret.ToString();\n}\n')])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("h3",{attrs:{id:"hex-16进制字符串-转换-byte"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hex-16进制字符串-转换-byte"}},[t._v("#")]),t._v(" hex(16进制字符串)转换 byte[]")]),t._v(" "),e("ol",[e("li",[t._v("一个循环将16进制转换成10进制。")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("public byte[] HexToByte(string hex)\n{\n    byte[] inputByteArray = new byte[hex.Length / 2];\n    for (var x = 0; x < inputByteArray.Length; x++)\n    {\n        var i = Convert.ToInt32(hex.Substring(x * 2, 2), 16);\n        inputByteArray[x] = (byte)i;\n    }\n    return inputByteArray;\n}\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br")])]),e("p",[t._v("调用如下内容，bytes[]中的长度为6，数据是228，184，173、229，155，189。即上文中的中国的十进制byte数组")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('string hexChinese = "E4B8ADE59BBD";//中国的UTF8编码。十六进制。\nbyte[] bytes = HexToByte(hexChinese);\nstring text = Encoding.UTF8.GetString(bytes);// `中国`\n')])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);