import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,b as i,o as s}from"./app-OEpYmDMf.js";const a={};function n(r,t){return s(),d("div",null,t[0]||(t[0]=[i(`<h1 id="数据库表设计" tabindex="-1"><a class="header-anchor" href="#数据库表设计"><span>数据库表设计</span></a></h1><p><a href="http://LinCMS.NET" target="_blank" rel="noopener noreferrer">LinCMS.NET</a> Core 使用 FreeSql 的 CodeFirst 模式来定义和管理数据库表结构。实体类 (Entity) 定义在 <code>src/LinCms.Core/Entities</code> 目录下，按模块划分。</p><p>以下是核心模块的部分表结构说明：</p><h2 id="freesql-repository-仓储层" tabindex="-1"><a class="header-anchor" href="#freesql-repository-仓储层"><span>FreeSql.Repository 仓储层</span></a></h2><p>FreeSql 提供了强大的仓储层实现，简化了数据库操作。</p><ul><li><strong>IBaseRepository&lt;TEntity, TKey&gt;</strong>: 基础仓储接口，提供了常用的 CRUD 操作。</li><li><strong>GuidRepository&lt;TEntity&gt;</strong>: 针对主键为 Guid 的实体提供的便捷仓储。</li><li><strong>LongRepository&lt;TEntity&gt;</strong>: 针对主键为 long 的实体提供的便捷仓储。</li></ul><p>开发者可以通过依赖注入获取特定实体的仓储实例，例如：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> readonly</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> IBaseRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;">LinUser</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#E06C75;">_userRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">IBaseRepository</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">LinUser</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> userRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    _userRepository</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> userRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Task</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;">LinUser</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">GetUserAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;">Guid</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> userId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> _userRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Select</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Where</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;">u</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> u</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Id</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> userId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ToOneAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="核心表-部分" tabindex="-1"><a class="header-anchor" href="#核心表-部分"><span>核心表 (部分)</span></a></h2><h3 id="lin-user-用户信息表" tabindex="-1"><a class="header-anchor" href="#lin-user-用户信息表"><span><code>lin_user</code> (用户信息表)</span></a></h3><p>存储系统用户的基础信息。</p><table><thead><tr><th>字段名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>id</code></td><td><code>Guid</code></td><td>主键，用户唯一标识</td></tr><tr><td><code>username</code></td><td><code>string(24)</code></td><td>用户名，唯一，非空</td></tr><tr><td><code>nickname</code></td><td><code>string(24)</code></td><td>用户昵称</td></tr><tr><td><code>password</code></td><td><code>string(100)</code></td><td>加密后的密码</td></tr><tr><td><code>avatar</code></td><td><code>string(500)</code></td><td>头像 URL</td></tr><tr><td><code>email</code></td><td><code>string(100)</code></td><td>邮箱，唯一</td></tr><tr><td><code>is_active</code></td><td><code>bool</code></td><td>是否激活</td></tr><tr><td><code>is_admin</code></td><td><code>bool</code></td><td>是否超级管理员</td></tr><tr><td><code>group_ids</code></td><td><code>string</code></td><td>用户所属权限组 ID 列表 (逗号分隔)</td></tr><tr><td><code>create_time</code></td><td><code>DateTime</code></td><td>创建时间</td></tr><tr><td>...</td><td>...</td><td>其他审计字段</td></tr></tbody></table><h3 id="lin-group-权限组表" tabindex="-1"><a class="header-anchor" href="#lin-group-权限组表"><span><code>lin_group</code> (权限组表)</span></a></h3><p>定义用户权限组。</p><table><thead><tr><th>字段名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>id</code></td><td><code>long</code></td><td>主键，自增</td></tr><tr><td><code>name</code></td><td><code>string(60)</code></td><td>权限组名称，唯一</td></tr><tr><td><code>info</code></td><td><code>string(255)</code></td><td>权限组描述</td></tr><tr><td><code>is_static</code></td><td><code>bool</code></td><td>是否为静态分组</td></tr><tr><td><code>level</code></td><td><code>byte</code></td><td>级别 (暂未使用)</td></tr><tr><td><code>create_time</code></td><td><code>DateTime</code></td><td>创建时间</td></tr><tr><td>...</td><td>...</td><td>其他审计字段</td></tr></tbody></table><h3 id="lin-permission-权限表" tabindex="-1"><a class="header-anchor" href="#lin-permission-权限表"><span><code>lin_permission</code> (权限表)</span></a></h3><p>定义系统中的具体权限点。</p><table><thead><tr><th>字段名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>id</code></td><td><code>long</code></td><td>主键，自增</td></tr><tr><td><code>name</code></td><td><code>string(60)</code></td><td>权限名称，唯一</td></tr><tr><td><code>module</code></td><td><code>string(50)</code></td><td>权限所属模块</td></tr><tr><td><code>mount</code></td><td><code>bool</code></td><td>是否挂载到菜单</td></tr><tr><td><code>create_time</code></td><td><code>DateTime</code></td><td>创建时间</td></tr><tr><td>...</td><td>...</td><td>其他审计字段</td></tr></tbody></table><h3 id="lin-group-permission-分组权限关系表" tabindex="-1"><a class="header-anchor" href="#lin-group-permission-分组权限关系表"><span><code>lin_group_permission</code> (分组权限关系表)</span></a></h3><p>存储权限组与权限之间的多对多关系。</p><table><thead><tr><th>字段名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>id</code></td><td><code>long</code></td><td>主键，自增</td></tr><tr><td><code>group_id</code></td><td><code>long</code></td><td>权限组 ID</td></tr><tr><td><code>permission_id</code></td><td><code>long</code></td><td>权限 ID</td></tr><tr><td><code>create_time</code></td><td><code>DateTime</code></td><td>创建时间</td></tr></tbody></table><h3 id="lin-log-日志表" tabindex="-1"><a class="header-anchor" href="#lin-log-日志表"><span><code>lin_log</code> (日志表)</span></a></h3><p>记录系统操作日志。</p><table><thead><tr><th>字段名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>id</code></td><td><code>long</code></td><td>主键，自增</td></tr><tr><td><code>message</code></td><td><code>string(450)</code></td><td>日志信息</td></tr><tr><td><code>user_id</code></td><td><code>Guid</code></td><td>操作用户 ID</td></tr><tr><td><code>username</code></td><td><code>string(24)</code></td><td>操作用户名</td></tr><tr><td><code>status_code</code></td><td><code>int</code></td><td>HTTP 状态码</td></tr><tr><td><code>method</code></td><td><code>string(20)</code></td><td>请求方法</td></tr><tr><td><code>path</code></td><td><code>string(500)</code></td><td>请求路径</td></tr><tr><td><code>permission</code></td><td><code>string(100)</code></td><td>访问的权限</td></tr><tr><td><code>authority</code></td><td><code>string(100)</code></td><td>用户权限</td></tr><tr><td><code>create_time</code></td><td><code>DateTime</code></td><td>创建时间</td></tr><tr><td>...</td><td>...</td><td>其他审计字段</td></tr></tbody></table><h3 id="lin-file-文件表" tabindex="-1"><a class="header-anchor" href="#lin-file-文件表"><span><code>lin_file</code> (文件表)</span></a></h3><p>记录上传的文件信息。</p><table><thead><tr><th>字段名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>id</code></td><td><code>long</code></td><td>主键，自增</td></tr><tr><td><code>path</code></td><td><code>string(500)</code></td><td>文件路径</td></tr><tr><td><code>name</code></td><td><code>string(100)</code></td><td>文件显示名称</td></tr><tr><td><code>extension</code></td><td><code>string(50)</code></td><td>文件扩展名</td></tr><tr><td><code>size</code></td><td><code>long</code></td><td>文件大小 (字节)</td></tr><tr><td><code>md5</code></td><td><code>string(40)</code></td><td>文件 MD5 值</td></tr><tr><td><code>type</code></td><td><code>short</code></td><td>文件类型 (1 本地, 2 ...)</td></tr><tr><td><code>create_time</code></td><td><code>DateTime</code></td><td>创建时间</td></tr><tr><td>...</td><td>...</td><td>其他审计字段</td></tr></tbody></table><p>更详细的表结构和关系请直接查阅 <code>src/LinCms.Core/Entities</code> 下的实体类定义。</p>`,28)]))}const c=e(a,[["render",n],["__file","database-design.html.vue"]]),h=JSON.parse('{"path":"/dotnetcore/lin-cms/database-design.html","title":"数据库表设计","lang":"zh-CN","frontmatter":{"description":"数据库表设计 LinCMS.NET Core 使用 FreeSql 的 CodeFirst 模式来定义和管理数据库表结构。实体类 (Entity) 定义在 src/LinCms.Core/Entities 目录下，按模块划分。 以下是核心模块的部分表结构说明： FreeSql.Repository 仓储层 FreeSql 提供了强大的仓储层实现，简化了...","head":[["meta",{"property":"og:url","content":"https://igeekfan.cn/igeekfan-docs/dotnetcore/lin-cms/database-design.html"}],["meta",{"property":"og:site_name","content":".NET 开发者指北"}],["meta",{"property":"og:title","content":"数据库表设计"}],["meta",{"property":"og:description","content":"数据库表设计 LinCMS.NET Core 使用 FreeSql 的 CodeFirst 模式来定义和管理数据库表结构。实体类 (Entity) 定义在 src/LinCms.Core/Entities 目录下，按模块划分。 以下是核心模块的部分表结构说明： FreeSql.Repository 仓储层 FreeSql 提供了强大的仓储层实现，简化了..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-28T17:00:03.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-28T17:00:03.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"数据库表设计\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-04-28T17:00:03.000Z\\",\\"author\\":[]}"],["link",{"rel":"alternate","type":"application/atom+xml","href":"https://igeekfan.cn/igeekfan-docs/atom.xml","title":".NET 开发者指北 Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://igeekfan.cn/igeekfan-docs/feed.json","title":".NET 开发者指北 JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://igeekfan.cn/igeekfan-docs/rss.xml","title":".NET 开发者指北 RSS Feed"}]]},"headers":[{"level":2,"title":"FreeSql.Repository 仓储层","slug":"freesql-repository-仓储层","link":"#freesql-repository-仓储层","children":[]},{"level":2,"title":"核心表 (部分)","slug":"核心表-部分","link":"#核心表-部分","children":[{"level":3,"title":"lin_user (用户信息表)","slug":"lin-user-用户信息表","link":"#lin-user-用户信息表","children":[]},{"level":3,"title":"lin_group (权限组表)","slug":"lin-group-权限组表","link":"#lin-group-权限组表","children":[]},{"level":3,"title":"lin_permission (权限表)","slug":"lin-permission-权限表","link":"#lin-permission-权限表","children":[]},{"level":3,"title":"lin_group_permission (分组权限关系表)","slug":"lin-group-permission-分组权限关系表","link":"#lin-group-permission-分组权限关系表","children":[]},{"level":3,"title":"lin_log (日志表)","slug":"lin-log-日志表","link":"#lin-log-日志表","children":[]},{"level":3,"title":"lin_file (文件表)","slug":"lin-file-文件表","link":"#lin-file-文件表","children":[]}]}],"git":{"createdTime":1745859603000,"updatedTime":1745859603000,"contributors":[{"name":"igeekfan","email":"igeekfan@foxmail.com","commits":1}]},"readingTime":{"minutes":2.39,"words":716},"filePathRelative":"dotnetcore/lin-cms/database-design.md","localizedDate":"2025年4月28日","autoDesc":true}');export{c as comp,h as data};
