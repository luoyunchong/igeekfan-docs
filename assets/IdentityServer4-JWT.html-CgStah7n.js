import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,b as a,o as i}from"./app-BGgbFL2G.js";const t={};function l(d,s){return i(),e("div",null,[...s[0]||(s[0]=[a(`<h1 id="认证鉴权状态" tabindex="-1"><a class="header-anchor" href="#认证鉴权状态"><span>认证鉴权状态</span></a></h1><p>认证分为以下情况：当前角色为管理员，该分组配置了权限，该分组未分配某一方法的权限.</p><p>状态码（StatusCode):401 UnAuthorized</p><table><thead><tr><th>StatusCode</th><th>含义</th></tr></thead><tbody><tr><td>401 UnAuthorized</td><td>未授权、无权限、未登录</td></tr><tr><td>422 UNPROCESSABLE ENTITY</td><td>令牌失效</td></tr><tr><td>200</td><td>访问正常</td></tr></tbody></table><ol><li>未登录，不带access_token，直接请求需要登录的接口、管理员接口结果一样。</li></ol><p>返回结果应为：状态码：401 UNAUTHORIZED</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;error_code&quot;: 10000,</span></span>
<span class="line"><span>    &quot;msg&quot;: &quot;认证失败，请检查请求头或者重新登陆&quot;,</span></span>
<span class="line"><span>    &quot;request&quot;: &quot;GET  /cms/admin/authority&quot;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>携带access_token，但非超级管理员(admin字段为2),访问的方法为角色为超管才有权限的方法。</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>[LinCmsAuthorize(Roles = LinGroup.Administrator)]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>返回结果应为：：状态码：401 UNAUTHORIZED</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;error_code&quot;: 10000,</span></span>
<span class="line"><span>    &quot;msg&quot;: &quot;只有超级管理员可操作&quot;,</span></span>
<span class="line"><span>    &quot;request&quot;: &quot;GET  /cms/admin/authority&quot;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>携带access_token ，访问只需要登录的接口（/cms/user/auths）</li></ol><p>控制器或方法上指定 <strong>[Authorize]</strong> 或 <strong>[LinCmsAuthorize]</strong> 特性标签时，必须登录才能访问，否则返回第一种结果。</p><p>返回结果应为：状态码：200</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;active&quot;: 1,</span></span>
<span class="line"><span>    &quot;admin&quot;: 1,</span></span>
<span class="line"><span>    &quot;auths&quot;: [</span></span>
<span class="line"><span>        {</span></span>
<span class="line"><span>            &quot;信息&quot;: [</span></span>
<span class="line"><span>                {</span></span>
<span class="line"><span>                    &quot;auth&quot;: &quot;查看lin的信息&quot;,</span></span>
<span class="line"><span>                    &quot;module&quot;: &quot;信息&quot;</span></span>
<span class="line"><span>                }</span></span>
<span class="line"><span>            ]</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    &quot;avatar&quot;: null,</span></span>
<span class="line"><span>    &quot;create_time&quot;: 1564372600000,</span></span>
<span class="line"><span>    &quot;email&quot;: &quot;acs@acs.com&quot;,</span></span>
<span class="line"><span>    &quot;group_id&quot;: 54,</span></span>
<span class="line"><span>    &quot;id&quot;: 112,</span></span>
<span class="line"><span>    &quot;nickname&quot;: &quot;alan&quot;,</span></span>
<span class="line"><span>    &quot;update_time&quot;: 1564487059000</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>携带access_token，但此用户无访问此方法的权限（即该用户的组别未配置此权限）。</li></ol><p>返回结果应为：状态码：401 UNAUTHORIZED</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;error_code&quot;: 10000,</span></span>
<span class="line"><span>    &quot;msg&quot;: &quot;权限不够，请联系超级管理员获得权限&quot;,</span></span>
<span class="line"><span>    &quot;request&quot;: &quot;GET  /cms/log/search&quot;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>携带过期的access_token值<br> 返回结果应为：状态码：401 UNAUTHORIZED</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;error_code&quot;: 10050,</span></span>
<span class="line"><span>    &quot;msg&quot;: &quot;令牌过期&quot;,</span></span>
<span class="line"><span>    &quot;request&quot;: &quot;GET  /cms/admin/users&quot;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>携带不正常的access_token值，后台无法下正常解析出用户信息<br> 返回结果应为：状态码：422 UNPROCESSABLE ENTITY</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;error_code&quot;: 10040,</span></span>
<span class="line"><span>    &quot;msg&quot;: &quot;令牌失效&quot;,</span></span>
<span class="line"><span>    &quot;request&quot;: &quot;GET  /cms/admin/users&quot;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22)])])}const o=n(t,[["render",l],["__file","IdentityServer4-JWT.html.vue"]]),c=JSON.parse('{"path":"/dotnetcore/lin-cms/IdentityServer4-JWT.html","title":"认证鉴权状态","lang":"zh-CN","frontmatter":{"description":"认证鉴权状态 认证分为以下情况：当前角色为管理员，该分组配置了权限，该分组未分配某一方法的权限. 状态码（StatusCode):401 UnAuthorized 未登录，不带access_token，直接请求需要登录的接口、管理员接口结果一样。 返回结果应为：状态码：401 UNAUTHORIZED 携带access_token，但非超级管理员(ad...","head":[["meta",{"property":"og:url","content":"https://igeekfan.cn/igeekfan-docs/dotnetcore/lin-cms/IdentityServer4-JWT.html"}],["meta",{"property":"og:site_name","content":".NET 开发者指北"}],["meta",{"property":"og:title","content":"认证鉴权状态"}],["meta",{"property":"og:description","content":"认证鉴权状态 认证分为以下情况：当前角色为管理员，该分组配置了权限，该分组未分配某一方法的权限. 状态码（StatusCode):401 UnAuthorized 未登录，不带access_token，直接请求需要登录的接口、管理员接口结果一样。 返回结果应为：状态码：401 UNAUTHORIZED 携带access_token，但非超级管理员(ad..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2020-07-24T17:10:08.000Z"}],["meta",{"property":"article:modified_time","content":"2020-07-24T17:10:08.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"认证鉴权状态\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2020-07-24T17:10:08.000Z\\",\\"author\\":[]}"],["link",{"rel":"alternate","type":"application/atom+xml","href":"https://igeekfan.cn/igeekfan-docs/atom.xml","title":".NET 开发者指北 Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://igeekfan.cn/igeekfan-docs/feed.json","title":".NET 开发者指北 JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://igeekfan.cn/igeekfan-docs/rss.xml","title":".NET 开发者指北 RSS Feed"}]]},"headers":[],"git":{"createdTime":1582888231000,"updatedTime":1595610608000,"contributors":[{"name":"luoyunchong","email":"luoyunchong@foxmail.com","commits":2}]},"readingTime":{"minutes":1.42,"words":427},"filePathRelative":"dotnetcore/lin-cms/IdentityServer4-JWT.md","localizedDate":"2020年2月28日","autoDesc":true}');export{o as comp,c as data};
