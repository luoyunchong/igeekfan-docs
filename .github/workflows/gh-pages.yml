name: Publish 

on:
    push:
        branches:
            - master

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: npm run buildðŸ’•
            - uses: actions/checkout@v1
            - run: |
                   npm install
                   npm run build
              
            - name: GitHub Pages actionðŸ’•
              uses: peaceiris/actions-gh-pages@v3.5.7
              env:
                ACTIONS_DEPLOY_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
                EXTERNAL_REPOSITORY: luoyunchong/luoyunchong.github.io #
                PUBLISH_BRANCH: master
                PUBLISH_DIR: docs/.vuepress/dist
              with:
                  emptyCommits: false

            - name: Sync to Gitee ðŸ’•
              uses: wearerequired/git-mirror-action@master
              env:
                  SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
              with:
                  source-repo: "git@github.com:luoyunchong/vovo-docs.git"
                  destination-repo: "git@gitee.com:igeekfan/vovo-docs.git"
